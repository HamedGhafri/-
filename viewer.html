<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>عرض القصيدة</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="container fade-up">

    <h1 id="title"></h1>

    <div id="poem" class="poem-box"></div>

    <div class="stamp">— ديوان حمد الغافري —</div>

    <a href="index.html" class="back-btn">عودة للفهرس</a>

</div>

<script>
document.addEventListener("contextmenu", e => e.preventDefault());

async function loadPoem(){
    const txt = await (await fetch("poems.txt")).text();
    const poems = txt.split("===\n").map(p=>p.trim()).filter(p=>p);

    const id = new URLSearchParams(location.search).get("id");
    const lines = poems[id].split("\n");

    document.getElementById("title").textContent = lines[0];

    const poetic = lines.slice(2).filter(l=>l.trim()!="");

    let html = "";
    for (let i=0; i<poetic.length; i+=2){
        let l1 = poetic[i] || "";
        let l2 = poetic[i+1] || "";

        html += `
            <div class="bayt fade-up" style="animation-delay:${i*0.1}s">
                <div>${l1}</div>
                <div>${l2}</div>
            </div>
        `;
    }

    document.getElementById("poem").innerHTML = html;
}

loadPoem();
</script>

</body>
</html>
