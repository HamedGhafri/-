<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµÙŠØ¯Ø©</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .poem-box {
            background: #faf5ef;
            border: 1px solid #e0d4c8;
            padding: 25px;
            border-radius: 18px;
            margin-top: 25px;
            animation: fadeIn 0.9s forwards;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
        }
        body.dark .poem-box {
            background: #251f1f;
            border: 1px solid #3a3333;
        }
        .actions {
            text-align: center;
            margin-bottom: 15px;
        }
        .small-btn {
            padding: 8px 16px;
            font-size: 16px;
            border-radius: 10px;
            margin: 5px;
            display: inline-block;
            background:#4c3b2f;
            color:#fff;
            text-decoration:none;
        }
        body.dark .small-btn {
            background:#6b5645;
        }
        .poem-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 15px;
            animation: fadeDown 0.7s forwards;
            text-align: center;
        }
    </style>
</head>

<body>

<button id="modeToggle" onclick="toggleMode()">ðŸŒ“</button>

<div class="container fade">

    <div id="title" class="poem-title"></div>

    <div class="actions">
        <a class="btn" href="index.html">Ø¹ÙˆØ¯Ø©</a>
        <button class="small-btn" onclick="copyPoem()">Ù†Ø³Ø® Ø§Ù„Ù‚ØµÙŠØ¯Ø©</button>
        <button class="small-btn" onclick="sharePoem()">Ù…Ø´Ø§Ø±ÙƒØ©</button>
    </div>

    <div class="poem-box">
        <pre id="content"></pre>
    </div>

</div>

<script>
function toggleMode(){
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", document.body.classList.contains("dark"));
}
if(localStorage.getItem("darkMode")==="true") document.body.classList.add("dark");

async function loadPoem(){
    const t = await (await fetch("poems.txt")).text();
    const poems = t.split("===\n").map(p=>p.trim()).filter(p=>p);

    const id = new URLSearchParams(location.search).get("id");
    const lines = poems[id].split("\n").filter(x=>x.trim());

    title.textContent = lines[0];
    content.textContent = lines.slice(2).join("\n");
}
loadPoem();

function copyPoem() {
    navigator.clipboard.writeText(content.textContent);
    alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù‚ØµÙŠØ¯Ø© âœ”");
}

function sharePoem() {
    const text = title.textContent + "\n\n" + content.textContent;
    navigator.share ? navigator.share({ text }) :
    alert("Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ");
}
</script>

</body>
</html>
