<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عرض القصيدة</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="poem-container">جاري تحميل القصيدة...</div>

<script>
    async function loadPoem() {
        const params = new URLSearchParams(location.search);
        const id = parseInt(params.get("id"));

        const res = await fetch("poems.txt");
        const text = await res.text();

        const blocks = text.split("===\n").map(b => b.trim()).filter(b => b.length > 0);

        if (isNaN(id) || id < 0 || id >= blocks.length) {
            document.getElementById("poem-container").textContent = "القصيدة غير موجودة.";
            return;
        }

        const block = blocks[id];
        const lines = block.split("\n");
        const title = lines.shift().trim();
        const poem = lines.join("\n");

        document.getElementById("poem-container").innerHTML = `
            <h1 class="title">${title}</h1>
            <pre class="poem">${poem}</pre>
        `;
    }

    loadPoem();
</script>

</body>
</html>
