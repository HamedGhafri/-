<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµÙŠØ¯Ø©</title>
    <link rel="stylesheet" href="style.css">
</head>

<body class="fade">

<div class="top-bar">ğŸ“– Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµÙŠØ¯Ø©</div>

<button id="modeToggle" onclick="toggleMode()">ğŸŒ“</button>

<div class="container">

    <a href="index.html" class="btn" style="margin-bottom:15px;">â† Ø§Ù„Ø¹ÙˆØ¯Ø©</a>

    <h1 id="title"></h1>

    <div id="poemBox" class="poem-box fade">
        <pre id="content"></pre>
    </div>

</div>

<script>
/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
function toggleMode() {
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", document.body.classList.contains("dark"));
}
if (localStorage.getItem("darkMode") === "true") {
    document.body.classList.add("dark");
}

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ØµÙŠØ¯Ø© */
async function loadPoem() {
    const res = await fetch("poems.txt");
    const text = await res.text();

    const poems = text.split("===\n").map(p => p.trim()).filter(p => p);
    const id = new URLSearchParams(window.location.search).get("id");

    const poem = poems[id].split("\n");

    const title = poem[0].trim(); 
    document.getElementById("title").textContent = title;

    const verses = poem.slice(2).join("\n");
    document.getElementById("content").textContent = verses;
}

loadPoem();
</script>

</body>
</html>
