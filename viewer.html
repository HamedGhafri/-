<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµÙŠØ¯Ø©</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<button id="modeToggle" onclick="toggleMode()">ðŸŒ“</button>

<div class="container">

    <h1 id="title">...</h1>

    <div class="font-box">
        <button class="font-btn" onclick="changeFont(+2)">A+</button>
        <button class="font-btn" onclick="changeFont(-2)">Aâˆ’</button>
        <button class="font-btn" onclick="resetFont()">â†º</button>
    </div>

    <a class="btn" href="index.html">Ø±Ø¬ÙˆØ¹</a>

    <pre id="content"></pre>

</div>

<script>
/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
function toggleMode() {
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", document.body.classList.contains("dark"));
}
if (localStorage.getItem("darkMode") === "true") document.body.classList.add("dark");

/* Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
let fontSize = localStorage.getItem("fontSize") ? Number(localStorage.getItem("fontSize")) : 22;

function applyFont() {
    document.getElementById("content").style.fontSize = fontSize + "px";
}
function changeFont(val) {
    fontSize += val;
    localStorage.setItem("fontSize", fontSize);
    applyFont();
}
function resetFont() {
    fontSize = 22;
    localStorage.setItem("fontSize", fontSize);
    applyFont();
}
applyFont();

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ØµÙŠØ¯Ø© */
async function loadPoem() {
    const res = await fetch("poems.txt");
    const text = await res.text();
    const poems = text.split("===\n").map(p => p.trim()).filter(p => p);

    const id = new URLSearchParams(window.location.search).get("id");
    const lines = poems[id].split("\n").filter(x => x.trim());

    document.getElementById("title").textContent = lines[0];
    document.getElementById("content").textContent = lines.slice(2).join("\n");
}

loadPoem();
</script>

</body>
</html>
